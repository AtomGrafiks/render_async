<div id="<%= container_id %>">
  <%= placeholder %>
</div>

<% content_for :render_async do %>
  <%= javascript_tag html_options do %>
    (function($){
      $.ajax({ url: "<%= path %>" }).always(function(response) {
        $("#<%= container_id %>").replaceWith(response);

        <% if event_name.present? %>
          document.dispatchEvent(new Event("<%= event_name %>", response));
        <% end %>
      });
    }(jQuery));
  <% end %>
<% end %>
